<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CookVerse - Cộng đồng chia sẻ công thức nấu ăn</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="#" class="logo" onclick="showPage('home')">
                <i class="fas fa-utensils"></i>
                <span>CookVerse</span>
            </a>
            <nav>
                <ul>
                    <li><a href="#" onclick="showPage('home')" class="active">Trang chủ</a></li>
                    <li><a href="#" onclick="showPage('recipes')">Công thức</a></li>
                    <li><a href="#" onclick="showPage('community')">Cộng đồng</a></li>
                    <li><a href="#" onclick="showPage('about')">Về chúng tôi</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Tìm công thức, nguyên liệu...">
                    <i class="fas fa-search" onclick="performSearch()"></i>
                </div>
                
                <!-- Hiển thị khi chưa đăng nhập - LUÔN HIỆN -->
                <div id="authButtons" class="auth-buttons">
                    <button class="btn btn-login" onclick="showLoginModal()">
                        <i class="fas fa-sign-in-alt"></i> Đăng nhập
                    </button>
                    <button class="btn btn-register" onclick="showRegisterModal()">
                        <i class="fas fa-user-plus"></i> Đăng ký
                    </button>
                </div>
                
                <!-- Hiển thị khi đã đăng nhập -->
                <div id="userMenu" class="user-menu" style="display: none;">
                    <button class="btn" id="addRecipeBtn" onclick="showAddRecipeModal()">
                        <i class="fas fa-plus"></i> Đăng công thức
                    </button>
                    <div class="user-avatar-container">
                        <div class="user-avatar-small" id="userAvatarSmall" onclick="toggleUserDropdown()">
                            <img id="userAvatarImg" src="" alt="Avatar">
                            <i class="fas fa-caret-down"></i>
                        </div>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="dropdown-header">
                                <div class="dropdown-avatar">
                                    <img id="dropdownAvatarImg" src="" alt="Avatar">
                                </div>
                                <div class="dropdown-user-info">
                                    <strong id="dropdownUserName"></strong>
                                    <span id="dropdownUserEmail"></span>
                                </div>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a href="#" onclick="showUserProfile(); closeUserDropdown();">
                                <i class="fas fa-user"></i> Trang cá nhân
                            </a>
                            <a href="#" onclick="showMyRecipes(); closeUserDropdown();">
                                <i class="fas fa-book"></i> Công thức của tôi
                            </a>
                            <a href="#" onclick="showSavedRecipes(); closeUserDropdown();">
                                <i class="fas fa-heart"></i> Công thức đã lưu
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" onclick="logout(); closeUserDropdown();">
                                <i class="fas fa-sign-out-alt"></i> Đăng xuất
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <section id="home" class="page-section active">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1>Khám phá thế giới ẩm thực đa dạng</h1>
                <p>Chia sẻ và khám phá hàng ngàn công thức nấu ăn từ cộng đồng những người yêu thích nấu nướng</p>
                <div class="hero-btns">
                    <button class="btn" onclick="showPage('recipes')">Khám phá ngay</button>
                    <button class="btn btn-outline" onclick="showPage('about')">Tìm hiểu thêm</button>
                </div>
            </div>
        </section>

        <!-- Smart Cook Feature -->
        <section class="smart-cook">
            <div class="container">
                <h2 class="section-title">Nấu Ăn Thông Minh</h2>
                <p>Nhập nguyên liệu bạn có, chúng tôi sẽ gợi ý công thức phù hợp</p>
                <div class="smart-cook-input">
                    <input type="text" id="smartCookInput" placeholder="Ví dụ: thịt gà, nấm, cà chua...">
                    <button class="btn" onclick="smartCook()">Tìm công thức</button>
                </div>
                <div id="smartCookResults" class="recipe-grid" style="margin-top: 2rem; display: none;"></div>
            </div>
        </section>

        <!-- Categories -->
        <section class="categories">
            <div class="container">
                <h2 class="section-title">Danh Mục Phổ Biến</h2>
                <div class="category-grid">
                    <a class="category-card" onclick="filterByCategory('appetizers')">
                        <div class="category-icon">
                            <i class="fas fa-egg"></i>
                        </div>
                        <h3>Món Khai Vị</h3>
                        <p>25 công thức</p>
                    </a>
                    <a class="category-card" onclick="filterByCategory('main-dishes')">
                        <div class="category-icon">
                            <i class="fas fa-drumstick-bite"></i>
                        </div>
                        <h3>Món Chính</h3>
                        <p>48 công thức</p>
                    </a>
                    <a class="category-card" onclick="filterByCategory('desserts')">
                        <div class="category-icon">
                            <i class="fas fa-ice-cream"></i>
                        </div>
                        <h3>Tráng Miệng</h3>
                        <p>32 công thức</p>
                    </a>
                    <a class="category-card" onclick="filterByCategory('vegetarian')">
                        <div class="category-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3>Món Chay</h3>
                        <p>18 công thức</p>
                    </a>
                    <a class="category-card" onclick="filterByCategory('beverages')">
                        <div class="category-icon">
                            <i class="fas fa-blender"></i>
                        </div>
                        <h3>Thức Uống</h3>
                        <p>15 công thức</p>
                    </a>
                    <a class="category-card" onclick="filterByCategory('eat-clean')">
                        <div class="category-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Eat Clean</h3>
                        <p>22 công thức</p>
                    </a>
                </div>
            </div>
        </section>

        <!-- Recipes -->
        <section class="recipes">
            <div class="container">
                <h2 class="section-title">Công Thức Mới Nhất</h2>
                <div class="recipe-grid" id="homeRecipes">
                    <!-- Recipes will be loaded by JavaScript -->
                </div>
            </div>
        </section>
    </section>

    <!-- Recipes Page với Categories tích hợp -->
    <section id="recipes" class="page-section">
        <div class="container">
            <div class="recipes-page">
                <div class="recipes-header">
                    <h2 class="section-title">Tất Cả Công Thức</h2>
                    <div class="search-box-large">
                        <input type="text" id="recipeSearchInput" placeholder="Tìm công thức, nguyên liệu...">
                        <i class="fas fa-search" onclick="searchRecipes()"></i>
                    </div>
                </div>

                <!-- Bộ lọc danh mục -->
                <div class="category-filters">
                    <div class="category-filter active" onclick="filterByCategory('all')">Tất cả</div>
                    <div class="category-filter" onclick="filterByCategory('appetizers')">Món Khai Vị</div>
                    <div class="category-filter" onclick="filterByCategory('main-dishes')">Món Chính</div>
                    <div class="category-filter" onclick="filterByCategory('desserts')">Tráng Miệng</div>
                    <div class="category-filter" onclick="filterByCategory('vegetarian')">Món Chay</div>
                    <div class="category-filter" onclick="filterByCategory('beverages')">Thức Uống</div>
                    <div class="category-filter" onclick="filterByCategory('eat-clean')">Eat Clean</div>
                </div>

                <div class="recipe-grid" id="allRecipes">
                    <!-- All recipes will be loaded by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Community Page - CẬP NHẬT -->
    <section id="community" class="page-section">
        <div class="container">
            <div class="community-page">
                <h2 class="section-title">Cộng Đồng CookVerse</h2>
                <p style="text-align: center; margin-bottom: 2rem; max-width: 800px; margin-left: auto; margin-right: auto;">
                    Kết nối với những người yêu thích nấu ăn, chia sẻ kinh nghiệm và học hỏi từ cộng đồng.
                </p>
                
                <!-- Thống kê cộng đồng -->
                <div class="community-stats">
                    <div class="stat-item">
                        <div class="stat-number" id="totalUsers">0</div>
                        <div class="stat-label">Thành viên</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalRecipes">0</div>
                        <div class="stat-label">Công thức</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalLikes">0</div>
                        <div class="stat-label">Lượt thích</div>
                    </div>
                </div>

                <!-- Bộ lọc cộng đồng -->
                <div class="community-filters">
                    <button class="filter-btn active" onclick="filterCommunity('all')">Tất cả</button>
                    <button class="filter-btn" onclick="filterCommunity('top')">Nổi bật</button>
                    <button class="filter-btn" onclick="filterCommunity('new')">Mới nhất</button>
                </div>

                <div class="user-grid" id="communityUsers">
                    <!-- Community users will be loaded by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- User Profile Page - CẬP NHẬT -->
    <section id="user-profile" class="page-section">
        <div class="container">
            <div class="user-profile-page">
                <div class="profile-header">
                    <div class="profile-cover">
                        <div class="profile-avatar-large">
                            <img id="profileAvatarLarge" src="" alt="Avatar">
                            <button class="edit-avatar-btn" onclick="changeAvatar()">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                    </div>
                    <div class="profile-info">
                        <h1 id="profileName"></h1>
                        <p id="profileEmail"></p>
                        <p class="join-date">Tham gia từ: <span id="profileJoinDate"></span></p>
                        <p class="profile-bio" id="profileBio">Chưa có giới thiệu</p>
                        <button class="btn btn-edit" onclick="EditProfile()">
                            <i class="fas fa-edit"></i> Chỉnh sửa hồ sơ
                        </button>
                    </div>
                </div>
                
                <div class="profile-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="statRecipes">0</div>
                        <div class="stat-label">Công thức</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statLikes">0</div>
                        <div class="stat-label">Lượt thích</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statSaved">0</div>
                        <div class="stat-label">Đã lưu</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="statFollowing">0</div>
                        <div class="stat-label">Đang theo dõi</div>
                    </div>
                </div>

                <div class="profile-tabs">
                    <button class="tab-btn active" onclick="showProfileTab('my-recipes-tab')">
                        <i class="fas fa-book"></i> Công thức đã chia sẻ
                    </button>
                    <button class="tab-btn" onclick="showProfileTab('saved-recipes-tab')">
                        <i class="fas fa-heart"></i> Công thức yêu thích
                    </button>
                </div>

                <div class="tab-content">
                    <div id="my-recipes-tab" class="tab-pane active">
                        <div class="recipe-grid" id="profileMyRecipes">
                            <!-- Công thức của người dùng sẽ được load ở đây -->
                        </div>
                    </div>
                    <div id="saved-recipes-tab" class="tab-pane">
                        <div class="recipe-grid" id="profileSavedRecipes">
                            <!-- Công thức đã lưu sẽ được load ở đây -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2>Chỉnh sửa hồ sơ</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="editName">Họ và tên</label>
                    <input type="text" id="editName" required>
                </div>
                <div class="form-group">
                    <label for="editBio">Giới thiệu bản thân</label>
                    <textarea id="editBio" placeholder="Hãy giới thiệu đôi chút về bản thân..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="editAvatar">Avatar (URL)</label>
                    <input type="text" id="editAvatar" placeholder="https://example.com/avatar.jpg">
                    <small>Nhập URL hình ảnh cho avatar của bạn</small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeEditProfile()">Hủy</button>
                    <button type="submit" class="btn">Cập nhật hồ sơ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- About Page -->
    <section id="about" class="page-section">
        <div class="container">
            <div class="about-page">
                <div class="about-content">
                    <div class="about-section">
                        <h2 class="section-title">Về CookVerse</h2>
                        <p>CookVerse là cộng đồng chia sẻ công thức nấu ăn lớn nhất Việt Nam, nơi mọi người có thể khám phá, học hỏi và chia sẻ đam mê nấu nướng.</p>
                    </div>
                    
                    <div class="about-section">
                        <h3>Sứ Mệnh Của Chúng Tôi</h3>
                        <p>Chúng tôi tin rằng nấu ăn không chỉ là kỹ năng mà còn là nghệ thuật kết nối mọi người. Sứ mệnh của CookVerse là tạo ra một không gian nơi mọi người có thể:</p>
                        <ul style="margin-top: 1rem; padding-left: 2rem;">
                            <li>Chia sẻ công thức gia đình và bí quyết nấu ăn</li>
                            <li>Học hỏi từ cộng đồng những người yêu nấu ăn</li>
                            <li>Kết nối với những người có cùng đam mê</li>
                            <li>Khám phá ẩm thực đa dạng từ khắp nơi trên thế giới</li>
                        </ul>
                    </div>
                    
                    <div class="about-section">
                        <h3>Đội Ngũ Của Chúng Tôi</h3>
                        <div class="team-grid">
                            <div class="team-member">
                                <div class="team-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <h4>Nguyễn Thanh Tú</h4>
                                <p>Founder & CEO</p>
                            </div>
                            <div class="team-member">
                                <div class="team-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <h4>Nguyễn Thành Nam</h4>
                                <p>Head Chef</p>
                            </div>
                            <div class="team-member">
                                <div class="team-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <h4>Phạm Minh Trọng</h4>
                                <p>Community Manager</p>
                            </div>
                            <div class="team-member">
                                <div class="team-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <h4>Nguyễn Trần Thanh Vân</h4>
                                <p>Tech Lead</p>
                            </div>
                            <div class="team-member">
                                <div class="team-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <h4>Nguyễn Ngọc Thanh Vy</h4>
                                <p>Head Chef</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recipe Detail Page -->
    <section id="recipe-detail" class="page-section">
        <div class="container">
            <div class="recipe-detail" id="recipeDetailContent">
                <!-- Recipe detail will be loaded by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>CookVerse</h3>
                <p>Cộng đồng chia sẻ công thức nấu ăn lớn nhất Việt Nam. Nơi kết nối những người yêu thích ẩm thực.</p>
            </div>
            <div class="footer-section">
                <h3>Liên kết nhanh</h3>
                <ul>
                    <li><a href="#" onclick="showPage('home')">Trang chủ</a></li>
                    <li><a href="#" onclick="showPage('recipes')">Công thức</a></li>
                    <li><a href="#" onclick="showPage('community')">Cộng đồng</a></li>
                    <li><a href="#" onclick="showPage('about')">Về chúng tôi</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Thể loại</h3>
                <ul>
                    <li><a href="#" onclick="filterByCategory('appetizers')">Món khai vị</a></li>
                    <li><a href="#" onclick="filterByCategory('main-dishes')">Món chính</a></li>
                    <li><a href="#" onclick="filterByCategory('desserts')">Tráng miệng</a></li>
                    <li><a href="#" onclick="filterByCategory('vegetarian')">Món chay</a></li>
                    <li><a href="#" onclick="filterByCategory('beverages')">Thức uống</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Kết nối với chúng tôi</h3>
                <ul>
                    <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                    <li><a href="#"><i class="fab fa-youtube"></i> YouTube</a></li>
                    <li><a href="#"><i class="fab fa-pinterest"></i> Pinterest</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 CookVerse. Tất cả các quyền được bảo lưu.</p>
        </div>
    </footer>

    <!-- Add Recipe Modal -->
    <div class="modal" id="addRecipeModal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2>Đăng Công Thức Mới</h2>
            <form id="recipeForm">
                <div class="form-group">
                    <label for="recipeName">Tên công thức</label>
                    <input type="text" id="recipeName" required>
                </div>
                <div class="form-group">
                    <label for="recipeDesc">Mô tả ngắn</label>
                    <textarea id="recipeDesc" required></textarea>
                </div>
                <div class="form-group">
                    <label for="recipeTime">Thời gian nấu (phút)</label>
                    <input type="number" id="recipeTime" required>
                </div>
                <div class="form-group">
                    <label for="recipeDifficulty">Độ khó</label>
                    <select id="recipeDifficulty" required>
                        <option value="Dễ">Dễ</option>
                        <option value="Trung bình">Trung bình</option>
                        <option value="Khó">Khó</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="recipeCategory">Danh mục</label>
                    <select id="recipeCategory" required>
                        <option value="appetizers">Món Khai Vị</option>
                        <option value="main-dishes">Món Chính</option>
                        <option value="desserts">Tráng Miệng</option>
                        <option value="vegetarian">Món Chay</option>
                        <option value="beverages">Thức Uống</option>
                        <option value="eat-clean">Eat Clean</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Nguyên liệu</label>
                    <div class="ingredient-list" id="ingredientList">
                        <div class="ingredient-item">
                            <input type="text" placeholder="Nguyên liệu và số lượng" required>
                            <button type="button" class="remove-ingredient">-</button>
                        </div>
                    </div>
                    <button type="button" class="add-ingredient" id="addIngredient">+ Thêm nguyên liệu</button>
                </div>
                <div class="form-group">
                    <label for="recipeSteps">Các bước thực hiện</label>
                    <textarea id="recipeSteps" placeholder="Mô tả chi tiết các bước thực hiện..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="recipeImage">Hình ảnh (URL)</label>
                    <input type="text" id="recipeImage" placeholder="https://example.com/image.jpg">
                </div>
                <button type="submit" class="btn">Đăng công thức</button>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2>Đăng Nhập</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Mật khẩu</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn">Đăng nhập</button>
            </form>
            <p style="text-align: center; margin-top: 1rem;">
                Chưa có tài khoản? <a href="#" onclick="showRegisterModal()">Đăng ký ngay</a>
            </p>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2>Đăng Ký</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">Họ và tên</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Mật khẩu</label>
                    <input type="password" id="registerPassword" required minlength="6">
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Xác nhận mật khẩu</label>
                    <input type="password" id="registerConfirmPassword" required>
                </div>
                <button type="submit" class="btn">Đăng ký</button>
            </form>
            <p style="text-align: center; margin-top: 1rem;">
                Đã có tài khoản? <a href="#" onclick="showLoginModal()">Đăng nhập ngay</a>
            </p>
        </div>
    </div>

    <!-- User Profile Page -->
    <section id="user-profile" class="page-section">
        <div class="container">
            <div class="user-profile-page">
                <h2 class="section-title">Hồ Sơ Cá Nhân</h2>
                <div class="profile-content">
                    <div class="profile-info">
                        <div class="profile-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="profile-details">
                            <h3 id="profileName"></h3>
                            <p id="profileEmail"></p>
                            <p>Tham gia từ: <span id="profileJoinDate"></span></p>
                        </div>
                    </div>
                    <div class="profile-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="statRecipes">0</div>
                            <div class="stat-label">Công thức</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statLikes">0</div>
                            <div class="stat-label">Lượt thích</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statSaved">0</div>
                            <div class="stat-label">Đã lưu</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- My Recipes Page -->
    <section id="my-recipes" class="page-section">
        <div class="container">
            <div class="my-recipes-page">
                <h2 class="section-title">Công Thức Của Tôi</h2>
                <div class="recipe-grid" id="myRecipesGrid">
                    <!-- Công thức của người dùng sẽ được load ở đây -->
                </div>
            </div>
        </div>
    </section>

    <!-- Saved Recipes Page -->
    <section id="saved-recipes" class="page-section">
        <div class="container">
            <div class="saved-recipes-page">
                <h2 class="section-title">Công Thức Đã Lưu</h2>
                <div class="recipe-grid" id="savedRecipesGrid">
                    <!-- Công thức đã lưu sẽ được load ở đây -->
                </div>
            </div>
        </div>
    </section>

    <script src="script.js"></script>
</body>
</html>
